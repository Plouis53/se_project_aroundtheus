!function(){"use strict";var e=class{constructor(e,t,s,r,i,n,o){this._name=e.name,this._link=e.link,this._id=e._id,this._likes=e.likes,this._cardSelector=s,this._handleCardClick=r,this._handleDeleteClick=i,this._handleLikeClick=n,this._loadingLikeCheck=o,this._userId=t,this._userCardOwnerId=e.owner._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}setCardEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this._id)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this._id)}))}_handleImageClick(){this._handleCardClick(this._name,this._link)}deleteCard(){this._cardElement.remove(),this._cardElement=null}updateLikes(e){this._likes=e,this.renderLikes()}renderLikes(){this._cardLikes.textContent=this._likes.length,this.isLiked()?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}isLiked(){return this._likes.some((e=>e._id===this._userId))}getView(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__title").textContent=this._name,this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._imageModal=this._cardElement.querySelector("#card-image-modal"),this._cardLikes=this._cardElement.querySelector(".card__likes-counter"),this.renderLikes(),this._userId!=this._userCardOwnerId&&this._deleteButton.remove(),this.setCardEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_setEventListeners(){this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)):(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass))}disableButton(){this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)}_hasInvalidInput(){return this._inputElements.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};var s=class{constructor(e){let{popupSelector:t}=e;var s,r,i;s=this,i=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_handleOverlay"))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,this._popupElement=document.querySelector(t),this._handleEscape=this._handleEscape.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscape)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscape)}_handleEscape(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleOverlay)}},r=class extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__form-input"),this._saveButton=this._popupForm.querySelector(".modal__button"),this._handleFormSubmit=t}renderLoading(e,t){this._saveButton.textContent=e?"Saving...":t}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){super.close(),this._popupForm.reset()}};const i={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__form-input_error",errorClass:"modal__error_visible"},n=document.querySelector(".profile__edit-button"),o=document.querySelector("#profile-edit-form"),a=document.querySelector(".profile__title"),l=document.querySelector(".profile__description"),d=document.querySelector("#profile-title-input"),c=document.querySelector("#profile-description-input"),h=document.querySelector("#card-add-modal"),u=document.querySelector(".profile__add-button"),_=document.querySelector("#Profile-image-edit-modal"),m=document.querySelector(".profile__image"),p=document.querySelector(".profile__image-edit"),v=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getAppInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}updateProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}addNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}addCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}deleteUserCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"67d93972-468f-4c7a-bef5-b0ddeb015065","Content-Type":"application/json"}}),f=new t(i,o);f.enableValidation();const E=new t(i,h);E.enableValidation(),new t(i,_).enableValidation();const L=new class{constructor(e){let{userName:t,userJob:s,userAvatar:r}=e;this._userName=t,this._userDescription=s,this._userAvatar=r}getUserInfo(){return{name:this._userName.textContent,about:this._userDescription.textContent}}setUserInfo(e){this._userName.textContent=e.name,this._userDescription.textContent=e.about}setAvatar(e){this._userAvatar.src=e}getAvatar(){return this._userAvatar.src}}({userName:a,userJob:l,userAvatar:m});n.addEventListener("click",(function(){const{name:e,about:t}=L.getUserInfo();d.value=e,c.value=t,b.open(),f.disableButton()}));const b=new r("#profile-edit-modal",(e=>{b.renderLoading(!0),v.updateProfileInfo(e).then((e=>{L.setUserInfo(e),b.close()})).catch((e=>{console.log(e)})).finally((()=>{b.renderLoading(!1,"Save")}))}));b.setEventListeners(),p.addEventListener("click",(()=>g.open()));const g=new r("#Profile-image-edit-modal",(e=>{g.renderLoading(!0),v.updateProfileAvatar(e.avatar).then((e=>{L.setAvatar(e.avatar),g.close()})).catch((e=>{console.log(e)})).finally((()=>{g.renderLoading(!1,"Save")}))}));g.setEventListeners();const k=new class extends s{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector("#modal-card-image"),this._popupCaption=this._popupElement.querySelector("#modal-card-caption")}open(e,t){this._popupCaption.textContent=e,this._popupImage.src=t,this._popupImage.alt=e,super.open()}}("#card-image-modal");k.setEventListeners();const S=new class extends s{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._saveButton=this._popupForm.querySelector(".modal__button")}setSubmitAction(e){this._handleSubmit=e}renderLoading(e){this._saveButton.textContent=e?"Loading...":"Yes"}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}}("#Delete-confirm-modal");let y,C;function I(t){const s=new e(t,C,"#card-template",((e,t)=>{k.open(e,t)}),(e=>{S.open(),S.setSubmitAction((()=>{S.renderLoading(!0),v.deleteUserCard(e).then((()=>{s.deleteCard(),S.close()})).catch((e=>{console.log(e)})).finally((()=>{S.renderLoading(!1)}))}))}),(e=>{s.isLiked()?v.removeCardLikes(e).then((e=>{s.updateLikes(e.likes)})).catch((e=>{console.log(e)})):v.addCardLikes(e).then((e=>{s.updateLikes(e.likes)})).catch((e=>{console.log(e)}))}));return s.getView()}S.setEventListeners(),v.getAppInfo().then((e=>{let[t,s]=e;C=t._id,L.setUserInfo(t),L.setAvatar(t.avatar),y=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._itemsList=document.querySelector(t)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._itemsList.prepend(e)}}({items:s,renderer:e=>{const t=I(e);y.addItem(t)}},".cards__list"),y.renderItems()})).catch((e=>{console.log(e)}));const B=new r("#card-add-modal",(e=>{B.renderLoading(!0),v.addNewCard(e).then((e=>{const t=I(e);B.close(),y.addItem(t)})).catch((e=>{console.log(e)})).finally((()=>{B.renderLoading(!1,"Create")}))}));u.addEventListener("click",(()=>{E.disableButton(),B.open()})),B.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cHJhY3RpY3VtLy4vc3JjL3V0aWxzL2FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0QXBwSW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xuICB9XG5cbiAgdXBkYXRlUHJvZmlsZUluZm8odXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiB1c2VyRGF0YS5hYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhZGROZXdDYXJkKGNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkRGF0YSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGFkZENhcmRMaWtlcyhjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZExpa2VzKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVQcm9maWxlQXZhdGFyKGF2YXRhcikge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcblxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcblxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZVVzZXJDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgdXNlcklkLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxuICAgIGxvYWRpbmdMaWtlQ2hlY2tcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5fbG9hZGluZ0xpa2VDaGVjayA9IGxvYWRpbmdMaWtlQ2hlY2s7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX3VzZXJDYXJkT3duZXJJZCA9IGRhdGFbXCJvd25lclwiXS5faWQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIHNldENhcmRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5faWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2lkKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVJbWFnZUNsaWNrKCkge1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgdXBkYXRlTGlrZXMobGlrZXMpIHtcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xuICAgIHRoaXMucmVuZGVyTGlrZXMoKTtcbiAgfVxuXG4gIHJlbmRlckxpa2VzKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5faW1hZ2VNb2RhbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZS1tb2RhbFwiKTtcblxuICAgIHRoaXMuX2NhcmRMaWtlcyA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZXMtY291bnRlclwiKTtcbiAgICB0aGlzLnJlbmRlckxpa2VzKCk7XG5cbiAgICBpZiAodGhpcy5fdXNlcklkICE9IHRoaXMuX3VzZXJDYXJkT3duZXJJZCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnJlbW92ZSgpO1xuICAgIH1cbiAgICB0aGlzLnNldENhcmRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudHMpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnRzO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnRzLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnRzLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50cy50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudHMuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5zb21lKFxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxuICAgICk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NhcGUgPSB0aGlzLl9oYW5kbGVFc2NhcGUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjYXBlKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlT3ZlcmxheSA9IChlKSA9PiB7XG4gICAgaWYgKFxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICApIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcbiAgICB0aGlzLl9zYXZlQnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBzYXZlQnV0dG9uVGV4dCkge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gc2F2ZUJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1pbnB1dF9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcblxuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjUHJvZmlsZS1pbWFnZS1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtZWRpdFwiKTtcblxuIiwiaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvYXBpLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb25cIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7XG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHByb2ZpbGVFZGl0TW9kYWwsXG4gIHByb2ZpbGVUaXRsZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlVGl0bGVJbnB1dCxcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXG4gIGFkZE5ld0NhcmRNb2RhbCxcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcbiAgYXZhdGFyRWRpdE1vZGFsLFxuICBwcm9maWxlQXZhdGFyLFxuICBhdmF0YXJCdXR0b24sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI2N2Q5Mzk3Mi00NjhmLTRjN2EtYmVmNS1iMGRkZWIwMTUwNjVcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vKi0tLS1WYWxpZGF0b3ItLS0tKi9cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgcHJvZmlsZUVkaXRNb2RhbFxuKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkTmV3Q2FyZE1vZGFsKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgYXZhdGFyRWRpdE1vZGFsXG4pO1xuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IHByb2ZpbGVUaXRsZSxcbiAgdXNlckpvYjogcHJvZmlsZURlc2NyaXB0aW9uLFxuICB1c2VyQXZhdGFyOiBwcm9maWxlQXZhdGFyLFxufSk7XG5cbmZ1bmN0aW9uIG9wZW5Qcm9maWxlRWRpdEZvcm0oKSB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBhYm91dDtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcblxuICBlZGl0Rm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvZmlsZUVkaXRGb3JtKTtcblxuLyotLS0tQ2xhc3MgQ29uc3RhbnRzLS0tLSovXG5cbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLCAodmFsdWVzKSA9PiB7XG4gIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZUluZm8odmFsdWVzKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgIC8vIHVzZXJJbmZvLnNldEF2YXRhcihkYXRhKTtcbiAgICAgIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwcm9maWxlUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSwgXCJTYXZlXCIpO1xuICAgIH0pO1xufSk7XG5cbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhdmF0YXJQb3B1cC5vcGVuKCkpO1xuXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI1Byb2ZpbGUtaW1hZ2UtZWRpdC1tb2RhbFwiLCAodmFsdWUpID0+IHtcbiAgYXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpXG4gICAgLnVwZGF0ZVByb2ZpbGVBdmF0YXIodmFsdWUuYXZhdGFyKVxuICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0QXZhdGFyKHZhbHVlLmF2YXRhcik7XG4gICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlLCBcIlNhdmVcIik7XG4gICAgfSk7XG59KTtcblxuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8vIGF2YXRhckZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xuXG5jb25zdCBwcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjY2FyZC1pbWFnZS1tb2RhbFwiKTtcbnByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiI0RlbGV0ZS1jb25maXJtLW1vZGFsXCIpO1xubGV0IGNhcmRTZWN0aW9uO1xubGV0IHVzZXJJZDtcblxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmREYXRhLFxuICAgIHVzZXJJZCxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgKGNhcmROYW1lLCBjYXJkTGluaykgPT4ge1xuICAgICAgcHJldmlld1BvcHVwLm9wZW4oY2FyZE5hbWUsIGNhcmRMaW5rKTtcbiAgICB9LFxuXG4gICAgKGNhcmRJZCkgPT4ge1xuICAgICAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcbiAgICAgIGRlbGV0ZUNhcmRQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgICAgICBkZWxldGVDYXJkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcblxuICAgICAgICBhcGlcbiAgICAgICAgICAuZGVsZXRlVXNlckNhcmQoY2FyZElkKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgKGNhcmRJZCkgPT4ge1xuICAgICAgaWYgKGNhcmQuaXNMaWtlZCgpKSB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5yZW1vdmVDYXJkTGlrZXMoY2FyZElkKVxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjYXJkLnVwZGF0ZUxpa2VzKGRhdGEubGlrZXMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcGlcbiAgICAgICAgICAuYWRkQ2FyZExpa2VzKGNhcmRJZClcbiAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhkYXRhLmxpa2VzKTtcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbmFwaVxuICAuZ2V0QXBwSW5mbygpXG4gIC50aGVuKChbdXNlckRhdGEsIHVzZXJDYXJkc10pID0+IHtcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIHVzZXJJbmZvLnNldEF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiB1c2VyQ2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBcIi5jYXJkc19fbGlzdFwiXG4gICAgKTtcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pO1xuXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNjYXJkLWFkZC1tb2RhbFwiLCAodmFsdWVzKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAuYWRkTmV3Q2FyZCh2YWx1ZXMpXG4gICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgYWRkQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UsIFwiQ3JlYXRlXCIpO1xuICAgIH0pO1xufSk7XG5cbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCB1c2VySm9iLCB1c2VyQXZhdGFyIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xuICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbiA9IHVzZXJKb2I7XG4gICAgdGhpcy5fdXNlckF2YXRhciA9IHVzZXJBdmF0YXI7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh2YWx1ZSkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gdmFsdWUubmFtZTtcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB2YWx1ZS5hYm91dDtcbiAgfVxuXG4gIHNldEF2YXRhcih2YWx1ZSkge1xuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gdmFsdWU7XG4gIH1cblxuICBnZXRBdmF0YXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJBdmF0YXIuc3JjO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtY2FyZC1pbWFnZVwiKTtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI21vZGFsLWNhcmQtY2FwdGlvblwiXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICB9XG5cbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGFjdGlvbjtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiTG9hZGluZy4uLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJZZXNcIjtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoQ29uZmlybWF0aW9uO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGl0ZW1zTGlzdCkge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9pdGVtc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBpdGVtc0xpc3QpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5faXRlbXNMaXN0LnByZXBlbmQoaXRlbSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImRhdGEiLCJ1c2VySWQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsImxvYWRpbmdMaWtlQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfbG9hZGluZ0xpa2VDaGVjayIsIl91c2VySWQiLCJfdXNlckNhcmRPd25lcklkIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsInNldENhcmRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkSW1hZ2UiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9kZWxldGVCdXR0b24iLCJkZWxldGVDYXJkIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwidXBkYXRlTGlrZXMiLCJyZW5kZXJMaWtlcyIsIl9jYXJkTGlrZXMiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImlzTGlrZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzb21lIiwibGlrZSIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJfaW1hZ2VNb2RhbCIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnRzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW5wdXRFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbGVtZW50cyIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJkaXNhYmxlQnV0dG9uIiwidmFsaWRpdHkiLCJ2YWxpZCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY2FwZSIsImJpbmQiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZU92ZXJsYXkiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX3NhdmVCdXR0b24iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJzYXZlQnV0dG9uVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiYWRkTmV3Q2FyZE1vZGFsIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImF2YXRhckVkaXRNb2RhbCIsInByb2ZpbGVBdmF0YXIiLCJhdmF0YXJCdXR0b24iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImdldEluaXRpYWxDYXJkcyIsImdldEFwcEluZm8iLCJhbGwiLCJ1cGRhdGVQcm9maWxlSW5mbyIsInVzZXJEYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZE5ld0NhcmQiLCJjYXJkRGF0YSIsImFkZENhcmRMaWtlcyIsImNhcmRJZCIsInJlbW92ZUNhcmRMaWtlcyIsInVwZGF0ZVByb2ZpbGVBdmF0YXIiLCJhdmF0YXIiLCJkZWxldGVVc2VyQ2FyZCIsImF1dGhvcml6YXRpb24iLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwidXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJ1c2VyQXZhdGFyIiwiX3VzZXJOYW1lIiwiX3VzZXJEZXNjcmlwdGlvbiIsIl91c2VyQXZhdGFyIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJnZXRBdmF0YXIiLCJwcm9maWxlUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwidmFsdWVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImF2YXRhclBvcHVwIiwicHJldmlld1BvcHVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBDYXB0aW9uIiwiZGVsZXRlQ2FyZFBvcHVwIiwic2V0U3VibWl0QWN0aW9uIiwiYWN0aW9uIiwiX2hhbmRsZVN1Ym1pdCIsImNhcmRTZWN0aW9uIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJDYXJkIiwiY2FyZE5hbWUiLCJjYXJkTGluayIsInVzZXJDYXJkcyIsIml0ZW1zTGlzdCIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfaXRlbXNMaXN0IiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJuZXdDYXJkIiwiYWRkQ2FyZFBvcHVwIl0sInNvdXJjZVJvb3QiOiIifQ==