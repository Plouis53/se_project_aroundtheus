!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_setEventListeners(){this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)):(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass))}_hasInvalidInput(){return this._inputElements.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}},t=class{constructor(e,t){let{cardData:n,handleImageClick:o}=e;this._name=n.name,this._link=n.link,this._cardSelector=t,this._cardData=n,this._handleImageClick=o}_setEventListeners(){console.log(),this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeButton())),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteButton())),this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,src:this._link})}))}_handleLikeButton(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}renderCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._element}};function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=class{constructor(e){let{popupSelector:t}=e;n(this,"_handleEscapeClose",(e=>{"Escape"===e.key&&this.close()})),n(this,"_handleOverlay",(e=>{e.target.classList.contains("modal_opened")&&this.close()})),this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose),document.addEventListener("mousedown",this._handleOverlay)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose),document.removeEventListener("mousedown",this._handleOverlay)}setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal__close")&&this.close()}))}},s=class extends o{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._formInputs=this._popupForm.querySelectorAll(".modal__form-input"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}close(){this._popupForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}};document.querySelector("#profile-edit-modal");const r=document.querySelector("#profile-edit-button"),i=(document.querySelector("#card-close-button"),document.querySelector("#profile-title-input")),l=document.querySelector("#profile-description-input"),a=(document.querySelector("#profile-modal-form"),document.querySelector("#card-add-modal"),document.querySelector("#profile-add-button")),c=(document.querySelector("#card-close-button"),document.querySelector(".cards__list")),d=(document.querySelector("#modal-add-card-form"),document.querySelector("#card-image-modal"),document.querySelector("#card-close-image"),document.querySelectorAll(".modal"),document.querySelector("#card-image"),"#card-template"),u={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__form-input_error",errorClass:"modal__error_visible"},m=new e(u,document.querySelector("#profile-modal-form"));m.enableValidation();const _=new e(u,document.querySelector("#modal-add-card-form"));_.enableValidation();const p=new s("#profile-edit-modal",(function(e){const t=e.title,n=e.description;y.setUserInfo({name:t,description:n}),p.close()}));p.setEventListeners();const h=new s("#card-add-modal",(function(e){E({name:e.title,link:e.link}),h.close()}));h.setEventListeners();const v=new class extends o{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector("#modal-card-image"),this._popupCaption=this._popupElement.querySelector("#modal-card-caption")}open(e,t){this._popupCaption.textContent=e,this._popupImage.src=t,this._popupImage.alt=e,super.open()}}("#card-image-modal");v.setEventListeners();const y=new class{constructor(e){let{nameSelector:t,descriptionSelector:n}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:n}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=n}}({nameSelector:".profile__title",descriptionSelector:".profile__description"}),S=new class{constructor(e,t){let{items:n,renderer:o}=e;this._items=n,this._renderer=o,this._itemsList=t}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._itemsList.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:E},c);function E(e){const n=new t({cardData:e,handleImageClick:e=>{const t={name:e.name,link:e.src};v.open(t.name,t.link)}},d).renderCard();S.addItem(n)}S.renderItems(),r.addEventListener("click",(()=>{const{name:e,description:t}=y.getUserInfo();(e=>{let{name:t,description:n}=e;i.value=t,l.value=n})({name:e,description:t}),p.open(),m.resetValidation()})),a.addEventListener("click",(()=>{_.resetValidation(),h.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0E0Q1JsQyxFQUFrQnBFLGlCQUFpQixTQUFTLEtBQzFDLE1BQU0sS0FBRTBCLEVBQUksWUFBRXdELEdBQWdCQyxFQUFTVSxjQU5wQnhFLEtBQTJCLElBQTFCLEtBQUVLLEVBQUksWUFBRXdELEdBQWE3RCxFQUN6Q2dELEVBQWtCSCxNQUFReEMsRUFDMUI0QyxFQUF3QkosTUFBUWdCLENBQVcsRUFLM0MyQixDQUFhLENBQUVuRixPQUFNd0QsZ0JBQ3JCSixFQUFjMUIsT0FDZHVCLEVBQWtCdkQsaUJBQWlCLElBR3JDbUQsRUFBaUJ2RSxpQkFBaUIsU0FBUyxLQUN6QzZFLEVBQWlCekQsa0JBQ2pCaUUsRUFBYWpDLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudHMpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnRzO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnRzLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnRzLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50cy50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudHMuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLnNvbWUoXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgY2FyZERhdGEsIGhhbmRsZUltYWdlQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5fY2FyZERhdGEgPSBjYXJkRGF0YTtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zb2xlLmxvZygpO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKSk7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKSk7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgICAgIHNyYzogdGhpcy5fbGluayxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICByZW5kZXJDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXkpO1xuICB9XG5cbiAgX2hhbmRsZUVzY2FwZUNsb3NlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZU92ZXJsYXkgPSAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcblxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1jbG9zZS1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW1vZGFsLWZvcm1cIik7XG5cbi8qZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1tb2RhbC1mb3JtXCJcbik7Ki9cblxuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1jbG9zZS1idXR0b25cIik7XG4vKmV4cG9ydCBjb25zdCBjYXJkQ2xvc2VCdXR0b24gPVxuICBhZGROZXdDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWNsb3NlLWJ1dHRvblwiKTsqL1xuXG5leHBvcnQgY29uc3QgY2FyZExpc3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtYWRkLWNhcmQtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkSW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZS1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkSW1hZ2VNb2RhbENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWNsb3NlLWltYWdlXCIpO1xuXG5leHBvcnQgY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbENhcmRQaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlXCIpO1xuXG5leHBvcnQgY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuIiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuICBhZGROZXdDYXJkQnV0dG9uLFxuICBjYXJkTGlzdEVsZW1lbnQsXG4gIGNhcmRTZWxlY3Rvcixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vKi0tLS1WYWxpZGF0aW9uLS0tLSovXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbW9kYWwtZm9ybVwiKVxuKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtYWRkLWNhcmQtZm9ybVwiKVxuKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vKi0tLS1DbGFzcyBDb25zdGFudHMtLS0tKi9cbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XG4pO1xuZWRpdEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhZGRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNjYXJkLWFkZC1tb2RhbFwiLCBoYW5kbGVBZGRGb3JtU3VibWl0KTtcbmFkZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmQtaW1hZ2UtbW9kYWxcIik7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxufSk7XG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gIH0sXG5cbiAgY2FyZExpc3RFbGVtZW50XG4pO1xuXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbi8qLS0tLUZ1bmN0aW9ucy0tLS0qL1xuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgY2FyZERhdGEsXG4gICAgICBoYW5kbGVJbWFnZUNsaWNrOiAoY2FyZERhdGEpID0+IHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSB7XG4gICAgICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcbiAgICAgICAgICBsaW5rOiBjYXJkRGF0YS5zcmMsXG4gICAgICAgIH07XG4gICAgICAgIGltYWdlUG9wdXAub3BlbihpbWFnZS5uYW1lLCBpbWFnZS5saW5rKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBjYXJkU2VsZWN0b3JcbiAgKS5yZW5kZXJDYXJkKCk7XG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZGF0YSkge1xuICBjb25zdCB0aXRsZSA9IGRhdGEudGl0bGU7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgIG5hbWU6IHRpdGxlLFxuICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgfSk7XG4gIGVkaXRGb3JtUG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBjb25zdCBjYXJkID0ge1xuICAgIG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLFxuICAgIGxpbms6IGlucHV0VmFsdWVzLmxpbmssXG4gIH07XG4gIHJlbmRlckNhcmQoY2FyZCk7XG4gIGFkZEZvcm1Qb3B1cC5jbG9zZSgpO1xufVxuXG5jb25zdCBmaWxsVXNlckZvcm0gPSAoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSA9PiB7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcbn07XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGZpbGxVc2VyRm9ybSh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pO1xuICBlZGl0Rm9ybVBvcHVwLm9wZW4oKTtcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhZGRGb3JtUG9wdXAub3BlbigpO1xufSk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWNhcmQtaW1hZ2VcIik7XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNtb2RhbC1jYXJkLWNhcHRpb25cIlxuICAgICk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBpdGVtc0xpc3QpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5faXRlbXNMaXN0ID0gaXRlbXNMaXN0O1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5faXRlbXNMaXN0LnByZXBlbmQoaXRlbSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnRzIiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lucHV0RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbGVtZW50cyIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJjYXJkRGF0YSIsImhhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2NhcmREYXRhIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJjb25zb2xlIiwibG9nIiwiX2VsZW1lbnQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJzcmMiLCJ0b2dnbGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJyZW5kZXJDYXJkIiwiYWx0IiwicG9wdXBTZWxlY3RvciIsIl9kZWZpbmVQcm9wZXJ0eSIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsIl9oYW5kbGVPdmVybGF5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2Zvcm1JbnB1dHMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImNhcmRMaXN0RWxlbWVudCIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJlZGl0Rm9ybVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImRhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImFkZEZvcm1Qb3B1cCIsImltYWdlUG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsImdldFVzZXJJbmZvIiwiX3JlZjIiLCJzZWN0aW9uIiwiaXRlbXNMaXN0IiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9pdGVtc0xpc3QiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImNhcmQiLCJDYXJkIiwiaW1hZ2UiLCJmaWxsVXNlckZvcm0iXSwic291cmNlUm9vdCI6IiJ9